[![Typing SVG](https://readme-typing-svg.herokuapp.com?color=%2336BCF7&lines=üìù+FastAPI+Notes+Management+API)](https://git.io/typing-svg)

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É –∏ –∑–∞–ø—É—Å–∫
–í –∫–∞—á–µ—Å—Ç–≤–µ –ë–î –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è mongoDB.  
–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ù–ê–ú–ï–†–ï–ù–ù–û –≤—ã–Ω–µ—Å–µ–Ω—ã .env —Ñ–∞–π–ª—ã:
- –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ .env –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ç–µ—Å—Ç–æ–≤ (TESTING=True);
- –≤ src/ .env –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ —á–µ—Ä–µ–∑ main.py –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É;
- –≤ src/ .env.docker –∏ .env.mongo.docker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —á–µ—Ä–µ–∑ docker-compose.

–ï—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞–ø—É—Å–∫–∞:
- –∑–∞–ø—É—Å–∫ —Ñ–∞–π–ª–∞ main.py
- –∑–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥–æ–π ```uvicorn src.app:app --reload```
- —á–µ—Ä–µ–∑ Docker ```docker-compose up -d --build```
- –æ—Å–æ–±–Ω—è–∫–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ ```coverage run -m pytest``` 

–õ–æ–∫–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –ø–æ—Ä—Ç 8000, —á–µ—Ä–µ–∑ Docker - 8011

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞```coverage run -m pytest```  
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–∫—Ä—ã—Ç–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞```coverage report -m```  
–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–∫—Ä—ã—Ç–∏–µ 96%  

## üìö –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ —Ä–æ–ª—è–º

### üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (`user`)
- –ú–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å, —É–¥–∞–ª—è—Ç—å, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏** –∑–∞–º–µ—Ç–∫–∏

### üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (`admin`)
- –ú–æ–∂–µ—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏
- –ú–æ–∂–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —É–¥–∞–ª—ë–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

## –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è

–í —Å–∏—Å—Ç–µ–º–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–≤–∞ —Ç–∏–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `user` –∏ `admin`.  
–ß—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–∏—Å—Ç–µ–º–æ–π, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.  
–í–æ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—è `email`, `password` –∏ **–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ** `is_admin` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`).  
**URL –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:** `POST /auth/register`

### –ü—Ä–∏–º–µ—Ä —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
```python
import requests

url = 'http://localhost:8011/auth/register'
body = {
    "username": "user1",
    "email": "user1@example.com",
    "password": "qwerty"
}
res = requests.post(url, json=body)
print(res.json())
```

---

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ JWT.  
–î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å –ø–æ–ª—è `email`, `password`.  
–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –≤–µ—Ä–Ω–µ—Ç—Å—è –æ—Ç–≤–µ—Ç —Å –ø–æ–ª—è–º–∏ `access_token` –∏ `token_type`.  
> ‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï! `refresh_token` –≤ –¥–∞–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç  
**URL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è access_token:** `POST /auth/token`

### –ü—Ä–∏–º–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```python
url = 'http://localhost:8011/auth/token'
body = {
    "email": "user1@example.com",
    "password": "qwerty"
}
res = requests.post(url, json=body)
print(res.json())
token = res.json().get("access_token")
```

---

## –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**URL –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** `GET /auth/user`  
(–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—Ç—å `Bearer` —Ç–æ–∫–µ–Ω)

### –ü—Ä–∏–º–µ—Ä
```python
url = 'http://localhost:8011/auth/user'
headers = {'Authorization': f'Bearer {token}'}
res = requests.get(url, headers=headers)
print(res.json())
```

---

# –ó–∞–º–µ—Ç–∫–∏

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∑–∞–º–µ—Ç–∫–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å `Bearer` —Ç–æ–∫–µ–Ω!  
–õ—é–±–∞—è –∑–∞–º–µ—Ç–∫–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑:
- –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è `title` (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ 256 —Å–∏–º–≤–æ–ª–æ–≤)
- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—è `body` (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ 65536 —Å–∏–º–≤–æ–ª–æ–≤)

---

## –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∏–ø–∞ `user`.  
**URL:** `POST /notes`

### –ü—Ä–∏–º–µ—Ä
```python
url = 'http://localhost:8011/notes'
headers = {'Authorization': f'Bearer {token}'}
body = {
    "title": "–ú–æ—è –ø–µ—Ä–≤–∞—è –∑–∞–º–µ—Ç–∫–∞",
    "body": "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ"
}
res = requests.post(url, headers=headers, json=body)
print(res.json())
```

---

## –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–º–µ—Ç–æ–∫

- `admin`: –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Äî –≤—Å–µ –∑–∞–º–µ—Ç–∫–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- `admin`: —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `notes_user_id` ‚Äî –∑–∞–º–µ—Ç–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `user`: –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ ‚Äî —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏  
- `user`: —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `notes_user_id`, –µ—Å–ª–∏ —Ä–∞–≤–µ–Ω —Ç–µ–∫—É—â–µ–º—É ID ‚Äî —Å–≤–æ–∏ –∑–∞–º–µ—Ç–∫–∏  
- `user`: —Å —á—É–∂–∏–º `notes_user_id` ‚Äî ‚ùå –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω  

**URL –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:** `GET /notes`  
**URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º:** `GET /notes?notes_user_id=<user_id>`

### –ü—Ä–∏–º–µ—Ä
```python
url = 'http://localhost:8011/notes'
headers = {'Authorization': f'Bearer {token}'}
res = requests.get(url, headers=headers)
print(res.json())
```

---

## –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–º–µ—Ç–∫–∏

- `admin`: –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø  
- `user`: –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–µ–π –∑–∞–º–µ—Ç–∫–µ  
**URL:** `GET /notes/{note_id}`

### –ü—Ä–∏–º–µ—Ä
```python
note_id = "SOME_NOTE_ID"
url = f'http://localhost:8011/notes/{note_id}'
headers = {'Authorization': f'Bearer {token}'}
res = requests.get(url, headers=headers)
print(res.json())
```

---

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∏–ø–∞ `user`, –µ—Å–ª–∏ –æ–Ω –≤–ª–∞–¥–µ–ª–µ—Ü.  
**URL (PUT):** `PUT /notes/{note_id}`  
**URL (PATCH):** `PATCH /notes/{note_id}`

### –ü—Ä–∏–º–µ—Ä (PUT)
```python
url = f'http://localhost:8011/notes/{note_id}'
headers = {'Authorization': f'Bearer {token}'}
body = {
    "title": "–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫",
    "body": "–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ"
}
res = requests.put(url, headers=headers, json=body)
print(res.json())
```

---

## –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–∫–∏

–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∏–ø–∞ `user`, –µ—Å–ª–∏ –æ–Ω –≤–ª–∞–¥–µ–ª–µ—Ü.  
**URL:** `DELETE /notes/{note_id}`

### –ü—Ä–∏–º–µ—Ä
```python
url = f'http://localhost:8011/notes/{note_id}'
headers = {'Authorization': f'Bearer {token}'}
res = requests.delete(url, headers=headers)
print(res.status_code)
```

---

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–Ω–æ–π –∑–∞–º–µ—Ç–∫–∏

–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∏–ø–∞ `admin`.  
–ï—Å–ª–∏ –∑–∞–º–µ—Ç–∫–∞ —Å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º ID —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å—Ä–µ–¥–∏ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö ‚Äî –æ–Ω–∞ –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.  
**URL:** `GET /notes/restore/{note_id}`

### –ü—Ä–∏–º–µ—Ä
```python
url = f'http://localhost:8011/notes/restore/{note_id}'
headers = {'Authorization': f'Bearer {admin_token}'}
res = requests.get(url, headers=headers)
print(res.json())
```
